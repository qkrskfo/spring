<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style type="text/css">
	li{
		list-style: none;
	}
</style>
<script type="text/javascript" src='../httpRequest.js'></script>
<script type="text/javascript">
	function requestNaverOpenApi(){
		var searchBook = document.getElementById('searchBook').value;
		if(searchBook==null || searchBook.trim()==''){
			return;
		}

		var url="proxy_naver.jsp?searchBook="+searchBook;
		sendRequest(url, null, displayResult,'GET');
	}

	function displayResult(){
		if(xhr.readyState==4){
			var xmlDoc = xhr.responseXML;
			var itemNodeList = xmlDoc.getElementsByTagName("item");
			var html = '<ul>';

			for (var i = 0; i < itemNodeList.length; i++) {
				var titleStr = itemNodeList[i].getElementsByTagName('title')[0].firstChild.nodeValue;
				var imageStr = itemNodeList[i].getElementsByTagName('image')[0].firstChild.nodeValue;
				var linkStr = itemNodeList[i].getElementsByTagName('link')[0].firstChild.nodeValue;
				
				html += "<li><img src='" + imageStr + "'><a href='" + linkStr + "'>" + titleStr + "</a></li>";
			}
			
			html += '</ul>';
			document.getElementById('printDiv').innerHTML = html;
		}
	}
</script>
</head>
<body>
<h1>OPEN API XML</h1>
<hr/>
책검색<input type="text" id='searchBook' 
		onkeyup="if(event.keyCode==13)requestNaverOpenApi();" name='searchBook' >
<input type="button" value="검색" onclick="requestNaverOpenApi();">

<br/>
<div id="printDiv" style="border: 1px solid blue;width: 70%">
	<!-- 
	<ul>
		<li><img src=''><a href=''>제목</a></li>
		<li><img src=''><a href=''>제목</a></li>
		<li><img src=''><a href=''>제목</a></li>
		<li><img src=''><a href=''>제목</a></li>
	</ul>
	 -->
</div>
</body>
</html>